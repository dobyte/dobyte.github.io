import{_ as t,C as i,c as s,o,a as e,q as p,b as n,m as r}from"./chunks/framework.BSdOUgs7.js";const y=JSON.parse('{"title":"通信协议","description":"","frontmatter":{},"headers":[{"level":2,"title":"心跳包","slug":"protocol-heartbeat","link":"#protocol-heartbeat","children":[]},{"level":2,"title":"数据包","slug":"protocol-data","link":"#protocol-data","children":[]},{"level":2,"title":"其他语言的实现","slug":"protocol-other-langauge","link":"#protocol-other-langauge","children":[]}],"relativePath":"guide/protocol.md","filePath":"guide/protocol.md"}'),c={name:"guide/protocol.md"};function u(d,l,h,b,g,k){const a=i("TextAd");return o(),s("div",null,[l[0]||(l[0]=e("h1",{id:"protocol",tabindex:"-1"},[r("通信协议 "),e("a",{class:"header-anchor",href:"#protocol","aria-label":'Permalink to "通信协议 {#protocol}"'},"​")],-1)),p(a),l[1]||(l[1]=n(`<h2 id="protocol-heartbeat" tabindex="-1">心跳包 <a class="header-anchor" href="#protocol-heartbeat" aria-label="Permalink to &quot;心跳包 {#protocol-heartbeat}&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span> 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7</span></span>
<span class="line"><span>+---------------------------------------------------------------+-+-------------+---------------------------------------------------------------+</span></span>
<span class="line"><span>|                              size                             |h|   extcode   |                      heartbeat time (ns)                      |</span></span>
<span class="line"><span>+---------------------------------------------------------------+-+-------------+---------------------------------------------------------------+</span></span></code></pre></div><ul><li><p>size: 4 bytes</p><ul><li>包长度位</li><li>长度固定为4字节，且不可修改</li></ul></li><li><p>header: 1 bytes</p><ul><li><p>包头标识</p></li><li><p>长度固定为1字节，且不可修改</p><ul><li><p>h: 1 bit</p><ul><li>心跳标识位</li><li>长度固定为1位，且不可修改</li><li>心跳包固定为%x1</li></ul></li><li><p>extcode: 7 bit</p><ul><li>扩展操作码位</li><li>长度固定为7位，且不可修改</li><li>保留位</li></ul></li></ul></li></ul></li><li><p>heartbeat time: 8 bytes</p><ul><li>服务端下行心跳时间</li><li>上行心跳包无需携带心跳数据，下行心跳包默认携带8 bytes的服务器时间（ns）</li><li>此协议数据由<a href="#etc">etc.packet.heartbeatTime</a>配置参数进行控制</li></ul></li></ul><h2 id="protocol-data" tabindex="-1">数据包 <a class="header-anchor" href="#protocol-data" aria-label="Permalink to &quot;数据包 {#protocol-data}&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span> 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7</span></span>
<span class="line"><span>+---------------------------------------------------------------+-+-------------+-------------------------------+-------------------------------+</span></span>
<span class="line"><span>|                              size                             |h|   extcode   |             route             |              seq              |</span></span>
<span class="line"><span>+---------------------------------------------------------------+-+-------------+-------------------------------+-------------------------------+</span></span>
<span class="line"><span>|                                                                message data ...                                                               |</span></span>
<span class="line"><span>+-----------------------------------------------------------------------------------------------------------------------------------------------+</span></span></code></pre></div><ul><li><p>size: 4 bytes</p><ul><li>包长度位</li><li>长度固定为4字节，且不可修改</li></ul></li><li><p>header: 1 bytes</p><ul><li><p>包头标识</p></li><li><p>长度固定为1字节，且不可修改</p><ul><li><p>h: 1 bit</p><ul><li>心跳标识位</li><li>长度固定为1位，且不可修改</li><li>数据包固定为%x0</li></ul></li><li><p>extcode: 7 bit</p><ul><li>扩展操作码位</li><li>长度固定为7位，且不可修改</li><li>保留位</li></ul></li></ul></li></ul></li><li><p>route: 1 bytes | 2 bytes | 4 bytes</p><ul><li>消息路由号</li><li>长度默认为2字节，可通过打包器配置<a href="#etc">etc.packet.routeBytes</a>进行修改</li><li>此参数由业务打包器packet.Packer打包，服务器开发者和客户端开发者均要关心此参数</li></ul></li><li><p>seq: 0 bytes | 1 bytes | 2 bytes | 4 bytes</p><ul><li>消息序列号</li><li>长度默认为2字节，可通过打包器配置<a href="#etc">etc.packet.seqBytes</a>进行修改</li><li>可通过将打包器配置<a href="#etc">etc.packet.seqBytes</a>设置为0来屏蔽使用消息序列号</li><li>消息序列号常用于请求/响应模型的消息对儿的确认</li><li>此参数由业务打包器packet.Packer打包，服务器开发者和客户端开发者均要关心此参数</li></ul></li><li><p>message data: n bytes</p><ul><li>消息数据</li><li>长度默认为5000字节，可通过打包器配置<a href="#etc">etc.packet.bufferBytes</a>进行修改</li><li>建议较大的消息包通过拆包的方式来进行发送，切勿盲目扩大消息数据的长度</li><li>此参数由业务打包器packet.Packer打包，服务器开发者和客户端开发者均要关心此参数</li></ul></li></ul><h2 id="protocol-other-langauge" tabindex="-1">其他语言的实现 <a class="header-anchor" href="#protocol-other-langauge" aria-label="Permalink to &quot;其他语言的实现 {#protocol-other-langauge}&quot;">​</a></h2><ul><li><a href="https://github.com/dobyte/due-client-ts/blob/master/src/packer.ts" target="_blank" rel="noreferrer">TS打包器</a></li><li><a href="https://github.com/dobyte/due-client-shape/blob/master/Packer.cs" target="_blank" rel="noreferrer">C#打包器</a></li></ul>`,8))])}const f=t(c,[["render",u]]);export{y as __pageData,f as default};
